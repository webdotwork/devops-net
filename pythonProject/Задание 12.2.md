# Домашнее задание к занятию "12.2 Команды для работы с Kubernetes"
Кластер — это сложная система, с которой крайне редко работает один человек. Квалифицированный devops умеет наладить работу всей команды, занимающейся каким-либо сервисом.
После знакомства с кластером вас попросили выдать доступ нескольким разработчикам. Помимо этого требуется служебный аккаунт для просмотра логов.

## Задание 1: Запуск пода из образа в деплойменте
Для начала следует разобраться с прямым запуском приложений из консоли. Такой подход поможет быстро развернуть инструменты отладки в кластере. Требуется запустить деплоймент на основе образа из hello world уже через deployment. Сразу стоит запустить 2 копии приложения (replicas=2). 

Требования:
 * пример из hello world запущен в качестве deployment
 * количество реплик в deployment установлено в 2
 ```
www@mkb:~$ kubectl create deployment --replicas=2 hello-node --image=k8s.gcr.io/echoserver:1.4
deployment.apps/hello-node created
```
 * наличие deployment можно проверить командой kubectl get deployment
```
www@mkb:~$ kubectl get deployment
NAME         READY   UP-TO-DATE   AVAILABLE   AGE
hello-node   2/2     2            2           5s
  ```
 * наличие подов можно проверить командой kubectl get pods
 ```
www@mkb:~$ kubectl get pods
NAME                         READY   STATUS    RESTARTS   AGE
hello-node-697897c86-9cd8q   1/1     Running   0          98s
hello-node-697897c86-szdkd   1/1     Running   0          98s
```
## Задание 2: Просмотр логов для разработки
Разработчикам крайне важно получать обратную связь от штатно работающего приложения и, еще важнее, об ошибках в его работе. 
Требуется создать пользователя и выдать ему доступ на чтение конфигурации и логов подов в app-namespace.

Требования: 
 * создан новый токен доступа для пользователя
 * пользователь прописан в локальный конфиг (~/.kube/config, блок users)
 * пользователь может просматривать логи подов и их конфигурацию (kubectl logs pod <pod_id>, kubectl describe pod <pod_id>)
 ```
www@mkb:~$ kubectl create ns app-namespace
namespace/app-namespace created
www@mkb:~$ kubectl get namespace
NAME                   STATUS   AGE
app-namespace          Active   21s
default                Active   5h38m
ingress-nginx          Active   5h22m
kube-node-lease        Active   5h38m
kube-public            Active   5h38m
kube-system            Active   5h38m
kubernetes-dashboard   Active   5h23m
 ```


## Задание 3: Изменение количества реплик 
Поработав с приложением, вы получили запрос на увеличение количества реплик приложения для нагрузки. Необходимо изменить запущенный deployment, увеличив количество реплик до 5. Посмотрите статус запущенных подов после увеличения реплик. 

Требования:
 * в deployment из задания 1 изменено количество реплик на 5
 ```
www@mkb:~$ kubectl get deployment
NAME         READY   UP-TO-DATE   AVAILABLE   AGE
hello-node   2/2     2            2           159m
www@mkb:~$ kubectl scale --replicas=5 deployment hello-node
deployment.apps/hello-node scaled
www@mkb:~$ kubectl get deployment
NAME         READY   UP-TO-DATE   AVAILABLE   AGE
hello-node   5/5     5            5           159m
 ```
 * проверить что все поды перешли в статус running (kubectl get pods)
```
www@mkb:~$ kubectl get pods -o wide
NAME                         READY   STATUS    RESTARTS   AGE    IP            NODE       NOMINATED NODE   READINESS GATES
hello-node-697897c86-8m67c   1/1     Running   0          74s    172.17.0.8    minikube   <none>           <none>
hello-node-697897c86-9cd8q   1/1     Running   0          161m   172.17.0.3    minikube   <none>           <none>
hello-node-697897c86-9vjk5   1/1     Running   0          74s    172.17.0.10   minikube   <none>           <none>
hello-node-697897c86-mslnt   1/1     Running   0          74s    172.17.0.9    minikube   <none>           <none>
hello-node-697897c86-szdkd   1/1     Running   0          161m   172.17.0.7    minikube   <none>           <none>
www@mkb:~$ kubectl get nodes
NAME       STATUS   ROLES           AGE   VERSION
minikube   Ready    control-plane   8h    v1.25.2
   
---

### Как оформить ДЗ?

Выполненное домашнее задание пришлите ссылкой на .md-файл в вашем репозитории.

---
